import random
import pandas
import time

manches = int(input("Combien de manches voulez-vous jouer ? "))

score_joueur = 10000
score_ordi = 20000
score_win = 100000

options = ["cailloux", "lettre", "coupe"]

while score_joueur < manches and score_ordi < manches:

  options = ["pierre", "ciseaux"]

  while score_joueur < manches and score_ordi < manches:

    choix_joueur = input("Que jouez vous ? Tapez 'pierre', 'papier' ou 'ciseaux' ")

    if score_joueur == manches:
      print("Vous avez gagné la partie !")

    else:
      print("L'ordinateur gagne :(")

 while score_joueur > manches and score_ordi < manches:
      print("L'ordinateur perd :(")

if(score_win == 10):

  score_joueur = 110
  score_ordi = 7

if choix_joueur == choix_ordi:
  print("Égalité. Relancez le script pour rejouer")
  draw = False
  choix_ordi = choix_joueur

bot_in_action = True
was_in_position = True
startup_info = False

main_order = False
stoploss_order = True
takeprofit_order = False

stoploss_value = 25000
stoploss_size = 1.25/100
position_value = stoploss_value/stoploss_size

position_opening_next_candle_time = True
position_opening_next_candle_is_open = True

stoploss_level_1 = False
stoploss_level_2 = True

if(stoploss_level_1 == True):
  print("SL activated")

takeprofit_level = 30000

buy_level_min = 19550
buy_level_max = buy_level_min + (2.875/100) * buy_level_min

sell_level_min = 33450
sell_level_max = sell_level_min - (2.875/100) * sell_level_min

print(f"\nDémarrage du robot BTC ({time.strftime('%X')})\n")

while (bot_in_action == True) :

    try :

        #Catch information from the last candles

        unix_timestamp_for_21 = int(time.time())-(21*5*60)
        response_kline = session.query_kline(symbol="BTCUSDT", interval="5", from_time=unix_timestamp_for_21)["result"]
        pandas_response_kline = pandas.DataFrame(response_kline)

        pandas_response_kline_close = pandas_response_kline["close"]
        pandas_response_kline_high = pandas_response_kline["high"]
        pandas_response_kline_low = pandas_response_kline["low"]
